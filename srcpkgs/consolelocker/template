# Template file for 'consolelocker'
pkgname=consolelocker
version=1.1.0
revision=1
build_style=gnu-makefile
# Disable manpage generation for now as the program uses help2man(1) to
# generate a man page. help2man(1) executes binary to get the help message.
# This causes issues with cross compiled binaries. It could be solved by using
# binfmt but let's bundle the manpage.
make_build_args="MAN8PAGES="
depends=kbd
short_desc="Lock sessions on the Linux console and virtual consoles"
maintainer="Nikita Ermakov <sh1r4s3@mail.si-head.nl>"
license="GPL-2.0-or-later"
homepage="https://github.com/legionus/consolelocker"
distfiles="https://github.com/legionus/consolelocker/archive/refs/tags/${version}-alt1.tar.gz"
checksum="a26ce14bcecbe909743766cbc040afc673534300b2c21dc86c936fad9026f94d"

do_install() {
	vbin consolelock
	vbin consolelocker
	# Helper program and script
	vmkdir usr/libexec/consolelocker 755
	vinstall vlocka 700 usr/libexec/consolelocker/
	vman "${FILESDIR}/consolelocker.8"
	vsv consolelockerd
}
